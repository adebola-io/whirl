use Core.{
  Net.{Server, Endpoint},
  Async.Await,
  Utils.Logger
};

/// This is the entry to the program.
public function Main() {
    logger := Logger();
    server := Server("http");

    endpoints := [
        Endpoint("GET", "/hello", fn (request, response) {
            response.Status(200).Json("Hello, world!");
        })
    ];

    server.AddEndpoints(endpoints);
    server.SetPort(8080);

    outcome := Await(server.Start());
    
    outcome
        .Ok(fn () {
            logger.success("Server started successfully.");
        })
        .Error(fn (error) {
            logger.error("Server could not start. Error: {error.Message}");
        });
}

