import Core.{
  Net.{Server, DefineEndpoints},
  Async.Await,
  Utils.Logger
};

function Main() {
    AppLogger := Logger();
    NewServer := Server("http");

    Endpoints := DefineEndpoints([
        ["GET", "/hello", Fn (Request, Response) {
            Response.Status(200).Json("Hello, world!")
        }]
    ]);

    NewServer.AddEndpoints(Endpoints);
    NewServer.SetPort(8080);

    StartOutcome := Await(NewServer.Start());
    
    if StartOutCome.IsOk() {
      AppLogger.Success("Server started successfully.");
    } else {
      AppLogger.Error("Server could not start. Error: {StartOutcome.Error().Message}");
    }
}