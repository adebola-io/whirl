module Process;

use Super.{
    Primitives.String,
    Primitives.UnsignedInt,
    Async.CurrentSequence
};
use Super.Prelude.Maybe;

public model Error {
    new(message?: String) {

    }
}

/// Mock function for panicking.
public function PanicOnCaller(message: String): never  {
    // Compiler built-in.
    Todo()
}

/// Mock function for compile-time stuff.
public function Halt(message: String): never {
    Todo()
}

/// Indicates that the current piece of code is unfinished.
/// 
/// Developers can use this function as a temporary marker for incomplete work.
/// It is also useful for satisfying the type system when implementing other functionality.
/// ## Panic
/// This function will *always* panic.
/// ## Usage
/// ```
/// ```
public function Todo(message?: String): never {
    return PanicOnCaller(message.UnwrapOr("Entered unfinished code."));
}

/// Panic is used to create and throw an exception.
/// ## Panic
/// This function will *always* panic.
/// ## Usage
/// ```
/// 
/// ```
public function Panic(message?: String): never {
    return Halt("Compiler built in.");
}

/// Returns the value of an environment variable.
public function ReadEnv(variableName: String): Maybe<&String> {
    Todo()
}

/// Schedules a function to run after a duration elapses.
public function WaitThen(callback: fn(), timeout: UnsignedInt) {
    CurrentSequence.Sleep(timeout);
    callback();
}