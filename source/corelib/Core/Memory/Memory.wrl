module Memory;

use Core.{
    Primitives.{UInt8, UnsignedInt},
    Prelude.{Iteratable, Maybe, None, Some, Display, String, Todo},
};


public model Buffer implements Iteratable<UInt8> + Display {
    var values: &[]UInt8;
    var idx: UnsignedInt;

    new(values: &[]UInt8) {
        this.values = values;
        this.idx = 0;
    }

    public function [Iteratable.Next](): ?UInt8 {
        if this.idx == this.values.Length() {
            return None();
        };
        nextByte := this.values[this.idx];
        this.idx += 1;
        return Some(nextByte);
    }

    public function [Display.ToStr](): String {
        return Todo();
    }
}