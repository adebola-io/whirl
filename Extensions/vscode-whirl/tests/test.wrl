import Core.{
  Net.{Server, Endpoint},
  Async.await,
  Utils.Logger
};

/// This is the entry to the program.
export fn main() {
    logger := Logger();
    server := Server("http");

    endpoints := [
        Endpoint("GET", "/hello", fn (request, response) {
            response.status(200).json("Hello, world!");
        })
    ];

    server.addEndpoints(endpoints);
    server.setPort(8080);

    outcome := await(server.start());
    
    if outcome.isOk() {
      logger.success("Server started successfully.");
    } else {
      error := outcome.error();
      logger.error("Server could not start. Error: {error.Message}");
    };
}

class Node {
  baseURI: String;
}